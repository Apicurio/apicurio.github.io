<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Managing Apicurio Registry content using the Maven plug-in :: Apicurio Registry</title>
    <link rel="canonical" href="https://www.apicur.io/registry/docs/apicurio-registry/3.1.x/getting-started/assembly-managing-registry-artifacts-maven.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
    <link rel="stylesheet" href="../../../assets/css/site.css">
    <link rel="stylesheet" href="https://www.apicur.io/css/rhbar.css">
<link rel="stylesheet" href="../../../assets/css/search.css">
    <link rel="shortcut icon" href="https://www.apicur.io/images/favicon.ico" type="image/x-icon" integrity="sha384-if9KH+NQ2dMhdrWu+INnJTcvG6riRakUAnbhecX5a7voubrapo7ouFGS+GYZ/N4P" crossorigin="anonymous"/>
  </head>
  <body class="article">
<div class="masthead-wrapper">
    <div class="search-box">
        <input id="search-input" type="text" placeholder="Search docs">
    </div>
    <div class="masthead">
        <div class="logo-wrapper">
            <a href="/"><img src="https://www.apicur.io/images/apicurio_headerlogo.png" class="project-logo"
                    title="Apicurio"></a>
        </div>
        <div class="menu-wrapper">
            <ul id="menu" class="menu">
                <li>
                    <a href="/studio/" id="menu-item-studio">Studio</a>
                </li>
                <li>
                    <a href="/registry/" id="menu-item-registry">Registry</a>
                </li>
                <li>
                    <a href="/datamodels/">Data Models</a>
                </li>
                <li>
                    <a href="/apicurito/">Apicurito</a>
                </li>
                <li>
                    <a href="/blog/">Blog</a>
                </li>
                <li>
                    <a href="/contact/">Contact</a>
                </li>
                <li>
                    <a href="https://github.com/apicurio">Fork</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<script>
    var currentURL = window.location.href;
    var studioAnchor = document.getElementById("menu-item-studio");
    var registryAnchor = document.getElementById("menu-item-registry");

    if (currentURL.includes("studio")) {
        studioAnchor.classList.add("active");
    } else if (currentURL.includes("registry")) {
        registryAnchor.classList.add("active");
    }
</script>
<div class="body">
<div class="nav-container" data-component="apicurio-registry" data-version="3.1.x">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Apicurio Registry</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-intro-to-the-registry.html">Introduction to Apicurio Registry</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-intro-to-registry-rules.html">Apicurio Registry content rules</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-installing-registry-docker.html">Installing Apicurio Registry using Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-installing-registry-openshift.html">Installing Apicurio Registry on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-installing-registry-storage-openshift.html">Installing Apicurio Registry storage on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-deploying-registry-operator.html">Deploying Apicurio Registry using the Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-registry-high-availability.html">Deploying Apicurio Registry for high availability</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-migrating-registry-v2-v3.html">Migrating an existing Apicurio Registry deployment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-configuring-registry-security.html">Configuring Apicurio Registry security options</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-configuring-the-registry.html">Configuring your Apicurio Registry deployment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Client applications</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-managing-registry-artifacts-ui.html">Managing Apicurio Registry content using the web console</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-managing-registry-artifacts-api.html">Managing Apicurio Registry content using the REST API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-using-the-registry-client.html">Managing Apicurio Registry content using a SDK</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="assembly-managing-registry-artifacts-maven.html">Managing Apicurio Registry content using the Maven plug-in</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Apache Flink integration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-using-flink-catalog.html">Using Apicurio Registry with Apache Flink</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Kafka client serializers/deserialisers</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-using-kafka-client-serdes.html">Validating Kafka messages using serializers/deserializers in Java clients</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-configuring-kafka-client-serdes.html">Configuring Kafka serializers/deserializers in Java clients</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="guide-exporting-registry-kafka-topic-data.html">Exporting Apicurio Registry Kafka topic data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-artifact-reference.html">Apicurio Registry artifact reference</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-rule-reference.html">Apicurio Registry content rule reference</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-config-reference.html">Apicurio Registry configuration reference</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-operator-config-reference.html">Apicurio Registry Operator configuration reference</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Apicurio Registry</span>
    <span class="version">3.1.x</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Apicurio Registry</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">3.1.x</a>
        </li>
        <li class="version">
          <a href="../../3.0.x/index.html">3.0.x</a>
        </li>
        <li class="version">
          <a href="../../2.6.x/index.html">2.6.x</a>
        </li>
        <li class="version">
          <a href="../../2.5.x/index.html">2.5.x</a>
        </li>
        <li class="version">
          <a href="../../2.4.x/index.html">2.4.x</a>
        </li>
        <li class="version">
          <a href="../../2.3.x/index.html">2.3.x</a>
        </li>
        <li class="version">
          <a href="../../2.2.x/index.html">2.2.x</a>
        </li>
        <li class="version">
          <a href="../../2.1.x/index.html">2.1.x</a>
        </li>
        <li class="version">
          <a href="../../2.0.x/index.html">2.0.x</a>
        </li>
        <li class="version">
          <a href="../../1.3.3.Final/index.html">1.3.3.Final</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Apicurio Registry Operator</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../apicurio-registry-operator/1.2.0-dev-v2.6.x/index.html">1.2.0-dev-v2.6.x</a>
        </li>
        <li class="version">
          <a href="../../../apicurio-registry-operator/1.1.1-v2.5.9.final/index.html">1.1.1-v2.5.9.final</a>
        </li>
        <li class="version">
          <a href="../../../apicurio-registry-operator/1.1.0-v2.4.12.final/index.html">1.1.0-v2.4.12.final</a>
        </li>
        <li class="version">
          <a href="../../../apicurio-registry-operator/1.0.0/index.html">1.0.0</a>
        </li>
        <li class="version">
          <a href="../../../apicurio-registry-operator/0.0.4/index.html">0.0.4</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Apicurio Registry</a></li>
    <li>Client applications</li>
    <li><a href="assembly-managing-registry-artifacts-maven.html">Managing Apicurio Registry content using the Maven plug-in</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">3.1.x</button>
  <div class="version-menu">
    <a class="version is-current" href="assembly-managing-registry-artifacts-maven.html">3.1.x</a>
    <a class="version" href="../../3.0.x/getting-started/assembly-managing-registry-artifacts-maven.html">3.0.x</a>
    <a class="version" href="../../2.6.x/getting-started/assembly-managing-registry-artifacts-maven.html">2.6.x</a>
    <a class="version" href="../../2.5.x/getting-started/assembly-managing-registry-artifacts-maven.html">2.5.x</a>
    <a class="version" href="../../2.4.x/getting-started/assembly-managing-registry-artifacts-maven.html">2.4.x</a>
    <a class="version" href="../../2.3.x/getting-started/assembly-managing-registry-artifacts-maven.html">2.3.x</a>
    <a class="version" href="../../2.2.x/getting-started/assembly-managing-registry-artifacts-maven.html">2.2.x</a>
    <a class="version" href="../../2.1.x/getting-started/assembly-managing-registry-artifacts-maven.html">2.1.x</a>
    <a class="version" href="../../2.0.x/getting-started/assembly-managing-registry-artifacts-maven.html">2.0.x</a>
    <a class="version" href="../../1.3.3.Final/getting-started/assembly-managing-registry-artifacts-maven.html">1.3.3.Final</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/Apicurio/apicurio-registry">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Managing Apicurio Registry content using the Maven plug-in</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph _abstract">
<p>When developing client applications, you can use the Apicurio Registry Maven plug-in to manage schema and API artifacts stored in Apicurio Registry:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#adding-artifacts-using-maven-plugin_registry">Adding schema and API artifacts using the Maven plug-in</a></p>
</li>
<li>
<p><a href="#downloading-artifacts-using-maven-plugin_registry">Downloading schema and API artifacts using the Maven plug-in</a></p>
</li>
<li>
<p><a href="#testing-artifacts-using-maven-plugin_registry">Testing schema and API artifacts using the Maven plug-in</a></p>
</li>
<li>
<p><a href="#adding-artifact-references-manually-using-maven-plugin_registry">Adding artifact references manually using the Apicurio Registry Maven plug-in</a></p>
</li>
<li>
<p><a href="#adding-artifact-references-automatically-using-maven-plugin_registry">Adding artifact references automatically using the Apicurio Registry Maven plug-in</a></p>
</li>
<li>
<p><a href="#configuring-tls-maven-plugin_registry">Configuring TLS and authentication for the Maven plug-in</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Apicurio Registry is installed and running in your environment.</p>
</li>
<li>
<p>Apache Maven is installed and configured in your environment.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-artifacts-using-maven-plugin_registry"><a class="anchor" href="#adding-artifacts-using-maven-plugin_registry"></a>Adding schema and API artifacts using the Maven plug-in</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>The most common use case for the Maven plug-in is adding artifacts during a build of your client application. You can accomplish this by using the <code>register</code> execution goal.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a Maven project for your client application. For more details, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update your Maven <code>pom.xml</code> file to use the <code>apicurio-registry-maven-plugin</code> to register an artifact. The following example shows registering Apache Avro and GraphQL schemas:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
  &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${apicurio.version}&lt;/version&gt;
  &lt;executions&gt;
      &lt;execution&gt;
        &lt;phase&gt;generate-sources&lt;/phase&gt;
        &lt;goals&gt;
            &lt;goal&gt;register&lt;/goal&gt;  <i class="conum" data-value="1"></i><b>(1)</b>
        &lt;/goals&gt;
        &lt;configuration&gt;
            &lt;registryUrl&gt;MY-REGISTRY-URL/apis/registry/v3&lt;/registryUrl&gt; <i class="conum" data-value="2"></i><b>(2)</b>
            &lt;authServerUrl&gt;MY-AUTH-SERVER&lt;/authServerUrl&gt;
            &lt;clientId&gt;MY-CLIENT-ID&lt;/clientId&gt;
            &lt;clientSecret&gt;MY-CLIENT-SECRET&lt;/clientSecret&gt; <i class="conum" data-value="3"></i><b>(3)</b>
            &lt;clientScope&gt;MY-CLIENT-SCOPE&lt;/clientScope&gt;
            &lt;artifacts&gt;
                &lt;artifact&gt;
                    &lt;groupId&gt;TestGroup&lt;/groupId&gt; <i class="conum" data-value="4"></i><b>(4)</b>
                    &lt;artifactId&gt;FullNameRecord&lt;/artifactId&gt;
                    &lt;file&gt;${project.basedir}/src/main/resources/schemas/record.avsc&lt;/file&gt;
                    &lt;ifExists&gt;FAIL&lt;/ifExists&gt;
                &lt;/artifact&gt;
                &lt;artifact&gt;
                    &lt;groupId&gt;TestGroup&lt;/groupId&gt;
                    &lt;artifactId&gt;ExampleAPI&lt;/artifactId&gt; <i class="conum" data-value="5"></i><b>(5)</b>
                    &lt;artifactType&gt;GRAPHQL&lt;/artifactType&gt;
                    &lt;file&gt;${project.basedir}/src/main/resources/apis/example.graphql&lt;/file&gt;
                    &lt;ifExists&gt;FIND_OR_CREATE_VERSION&lt;/ifExists&gt;
                    &lt;canonicalize&gt;true&lt;/canonicalize&gt;
                &lt;/artifact&gt;
            &lt;/artifacts&gt;
        &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
 &lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify <code>register</code> as the execution goal to upload the schema artifact to Apicurio Registry.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the Apicurio Registry URL with the <code>../apis/registry/v3</code> endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If authentication is required, you can specify your authentication server and client credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify the Apicurio Registry artifact group ID. You can specify the <code>default</code> group if you do not want to use a unique group ID.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>You can register multiple artifacts using the specified group ID, artifact ID, and location.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Build your Maven project, for example, by using the <code>mvn package</code> command.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more details on using Apache Maven, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
<li>
<p>For open source examples of using the Apicurio Registry Maven plug-in, see the <a href="https://github.com/Apicurio/apicurio-registry/tree/main/examples">Apicurio Registry demonstration examples</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="downloading-artifacts-using-maven-plugin_registry"><a class="anchor" href="#downloading-artifacts-using-maven-plugin_registry"></a>Downloading schema and API artifacts using the Maven plug-in</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You can use the Maven plug-in to download artifacts from Apicurio Registry. This is often useful, for example, when generating code from a registered schema.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a Maven project for your client application. For more details, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update your Maven <code>pom.xml</code> file to use the <code>apicurio-registry-maven-plugin</code> to download an artifact. The following example shows downloading Apache Avro and GraphQL schemas.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
  &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${apicurio.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;generate-sources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;download&lt;/goal&gt; <i class="conum" data-value="1"></i><b>(1)</b>
      &lt;/goals&gt;
      &lt;configuration&gt;
          &lt;registryUrl&gt;MY-REGISTRY-URL/apis/registry/v3&lt;/registryUrl&gt; <i class="conum" data-value="2"></i><b>(2)</b>
          &lt;authServerUrl&gt;MY-AUTH-SERVER&lt;/authServerUrl&gt;
          &lt;clientId&gt;MY-CLIENT-ID&lt;/clientId&gt;
          &lt;clientSecret&gt;MY-CLIENT-SECRET&lt;/clientSecret&gt; <i class="conum" data-value="3"></i><b>(3)</b>
          &lt;clientScope&gt;MY-CLIENT-SCOPE&lt;/clientScope&gt;
          &lt;artifacts&gt;
              &lt;artifact&gt;
                  &lt;groupId&gt;TestGroup&lt;/groupId&gt; <i class="conum" data-value="4"></i><b>(4)</b>
                  &lt;artifactId&gt;FullNameRecord&lt;/artifactId&gt; <i class="conum" data-value="5"></i><b>(5)</b>
                  &lt;file&gt;${project.build.directory}/classes/record.avsc&lt;/file&gt;
                  &lt;overwrite&gt;true&lt;/overwrite&gt;
              &lt;/artifact&gt;
              &lt;artifact&gt;
                  &lt;groupId&gt;TestGroup&lt;/groupId&gt;
                  &lt;artifactId&gt;ExampleAPI&lt;/artifactId&gt;
                  &lt;version&gt;1&lt;/version&gt;
                  &lt;file&gt;${project.build.directory}/classes/example.graphql&lt;/file&gt;
                  &lt;overwrite&gt;true&lt;/overwrite&gt;
              &lt;/artifact&gt;
          &lt;/artifacts&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify <code>download</code> as the execution goal.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the Apicurio Registry URL with the <code>../apis/registry/v3</code> endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If authentication is required, you can specify your authentication server and client credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify the Apicurio Registry artifact group ID. You can specify the <code>default</code> group if you do not want to use a unique group.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>You can download multiple artifacts to a specified directory using the artifact ID.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Build your Maven project, for example, by using the <code>mvn package</code> command.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more details on using Apache Maven, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
<li>
<p>For open source examples of using the Apicurio Registry Maven plug-in, see the <a href="https://github.com/Apicurio/apicurio-registry/tree/main/examples">Apicurio Registry demonstration examples</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="testing-artifacts-using-maven-plugin_registry"><a class="anchor" href="#testing-artifacts-using-maven-plugin_registry"></a>Testing schema and API artifacts using the Maven plug-in</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>You might want to verify that an artifact can be registered without actually making any changes. This is often useful when rules are configured in Apicurio Registry. Testing the artifact results in a failure if the artifact content violates any of the configured rules.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When testing artifacts using the Maven plug-in, even if the artifact passes the test, no content is added to Apicurio Registry.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a Maven project for your client application. For more details, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update your Maven <code>pom.xml</code> file to use the <code>apicurio-registry-maven-plugin</code> to test an artifact. The following example shows testing an Apache Avro schema:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
  &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${apicurio.version}&lt;/version&gt;
  &lt;executions&gt;
      &lt;execution&gt;
        &lt;phase&gt;generate-sources&lt;/phase&gt;
        &lt;goals&gt;
            &lt;goal&gt;test-update&lt;/goal&gt;  <i class="conum" data-value="1"></i><b>(1)</b>
        &lt;/goals&gt;
        &lt;configuration&gt;
            &lt;registryUrl&gt;MY-REGISTRY-URL/apis/registry/v3&lt;/registryUrl&gt; <i class="conum" data-value="2"></i><b>(2)</b>
            &lt;authServerUrl&gt;MY-AUTH-SERVER&lt;/authServerUrl&gt;
            &lt;clientId&gt;MY-CLIENT-ID&lt;/clientId&gt;
            &lt;clientSecret&gt;MY-CLIENT-SECRET&lt;/clientSecret&gt; <i class="conum" data-value="3"></i><b>(3)</b>
            &lt;clientScope&gt;MY-CLIENT-SCOPE&lt;/clientScope&gt;
            &lt;artifacts&gt;
                &lt;artifact&gt;
                    &lt;groupId&gt;TestGroup&lt;/groupId&gt; <i class="conum" data-value="4"></i><b>(4)</b>
                    &lt;artifactId&gt;FullNameRecord&lt;/artifactId&gt;
                    &lt;file&gt;${project.basedir}/src/main/resources/schemas/record.avsc&lt;/file&gt; <i class="conum" data-value="5"></i><b>(5)</b>
                &lt;/artifact&gt;
            &lt;/artifacts&gt;
        &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
 &lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify <code>test-update</code> as the execution goal to test the schema artifact.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the Apicurio Registry URL with the <code>../apis/registry/v3</code> endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If authentication is required, you can specify your authentication server and client credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify the Apicurio Registry artifact group ID. You can specify the <code>default</code> group if you do not want to use a unique group.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>You can test multiple artifacts from a specified directory using the artifact ID.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Build your Maven project, for example, by using the <code>mvn package</code> command.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more details on using Apache Maven, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
<li>
<p>For open source examples of using the Apicurio Registry Maven plug-in, see the <a href="https://github.com/Apicurio/apicurio-registry/tree/main/examples">Apicurio Registry demonstration examples</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-artifact-references-manually-using-maven-plugin_registry"><a class="anchor" href="#adding-artifact-references-manually-using-maven-plugin_registry"></a>Adding artifact references manually using the Apicurio Registry Maven plug-in</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Some Apicurio Registry artifact types can include <em>artifact references</em> from one artifact file to another. You can create efficiencies by defining reusable schema or API artifacts, and then referencing them from multiple locations in artifact references.</p>
</div>
<div class="paragraph">
<p>The following artifact types support artifact references:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apache Avro</p>
</li>
<li>
<p>Google Protobuf</p>
</li>
<li>
<p>JSON Schema</p>
</li>
<li>
<p>OpenAPI</p>
</li>
<li>
<p>AsyncAPI</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This section shows a simple example of using the Apicurio Registry Maven plug-in to manually register an artifact reference to a simple Avro schema artifact stored in Apicurio Registry. This example assumes that the following <code>Exchange</code> schema artifact has already been created in Apicurio Registry:</p>
</div>
<div class="listingblock">
<div class="title">Exchange schema</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "namespace": "com.kubetrade.schema.common",
  "type": "enum",
  "name": "Exchange",
  "symbols" : ["GEMINI"]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example then creates a <code>TradeKey</code> schema artifact, which includes a reference to the nested <code>Exchange</code> schema artifact:</p>
</div>
<div class="listingblock">
<div class="title">TradeKey schema with nested reference to Exchange schema</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "namespace": "com.kubetrade.schema.trade",
  "type": "record",
  "name": "TradeKey",
  "fields": [
    {
      "name": "exchange",
      "type": "com.kubetrade.schema.common.Exchange"
    },
    {
      "name": "key",
      "type": "string"
    }
  ]
}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a Maven project for your client application. For more details, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
<li>
<p>The referenced <code>Exchange</code> schema artifact is already created in Apicurio Registry.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update your Maven <code>pom.xml</code> file to use the <code>apicurio-registry-maven-plugin</code> to register the <code>TradeKey</code> schema, which includes a nested reference to the <code>Exchange</code> schema as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
    &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${apicurio-registry.version}&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;phase&gt;generate-sources&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;register&lt;/goal&gt; <i class="conum" data-value="1"></i><b>(1)</b>
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;registryUrl&gt;MY-REGISTRY-URL/apis/registry/v3&lt;/registryUrl&gt; <i class="conum" data-value="2"></i><b>(2)</b>
                &lt;authServerUrl&gt;MY-AUTH-SERVER&lt;/authServerUrl&gt;
                &lt;clientId&gt;MY-CLIENT-ID&lt;/clientId&gt;
                &lt;clientSecret&gt;MY-CLIENT-SECRET&lt;/clientSecret&gt; <i class="conum" data-value="3"></i><b>(3)</b>
                &lt;clientScope&gt;MY-CLIENT-SCOPE&lt;/clientScope&gt;
                &lt;artifacts&gt;
                    &lt;artifact&gt;
                        &lt;groupId&gt;test-group&lt;/groupId&gt; <i class="conum" data-value="4"></i><b>(4)</b>
                        &lt;artifactId&gt;TradeKey&lt;/artifactId&gt;
                        &lt;version&gt;2.0&lt;/version&gt;
                        &lt;artifactType&gt;AVRO&lt;/artifactType&gt;
                        &lt;file&gt;
                            ${project.basedir}/src/main/resources/schemas/TradeKey.avsc
                        &lt;/file&gt;
                        &lt;ifExists&gt;FIND_OR_CREATE_VERSION&lt;/ifExists&gt;
                        &lt;canonicalize&gt;true&lt;/canonicalize&gt;
                        &lt;references&gt;
                            &lt;reference&gt; <i class="conum" data-value="5"></i><b>(5)</b>
                                &lt;name&gt;com.kubetrade.schema.common.Exchange&lt;/name&gt;
                                &lt;groupId&gt;test-group&lt;/groupId&gt;
                                &lt;artifactId&gt;Exchange&lt;/artifactId&gt;
                                &lt;version&gt;2.0&lt;/version&gt;
                                &lt;artifactType&gt;AVRO&lt;/artifactType&gt;
                                &lt;file&gt;
                                    ${project.basedir}/src/main/resources/schemas/Exchange.avsc
                                &lt;/file&gt;
                                &lt;ifExists&gt;FIND_OR_CREATE_VERSION&lt;/ifExists&gt;
                                &lt;canonicalize&gt;true&lt;/canonicalize&gt;
                            &lt;/reference&gt;
                        &lt;/references&gt;
                    &lt;/artifact&gt;
                &lt;/artifacts&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify <code>register</code> as the execution goal to upload the schema artifacts to Apicurio Registry.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the Apicurio Registry URL by using the <code>../apis/registry/v3</code> endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If authentication is required, you can specify your authentication server and client credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify the Apicurio Registry artifact group ID. You can specify the <code>default</code> group if you do not want to use a unique group ID.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Specify the Apicurio Registry artifact reference using its group ID, artifact ID, version, type, and location. You can register multiple artifact references in this way.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Build your Maven project, for example, by using the <code>mvn package</code> command.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more details on using Apache Maven, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
<li>
<p>For an open source example of using the Apicurio Registry Maven plug-in to manually register an artifact reference, see the <a href="https://github.com/Apicurio/apicurio-registry/tree/main/examples/avro-maven-with-references">avro-maven-with-references demonstration example</a>.</p>
</li>
<li>
<p>For more examples of artifact references, see the section on configuring each artifact type in <a href="assembly-configuring-kafka-client-serdes.html">Configuring Kafka serializers/deserializers in Java clients</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-artifact-references-automatically-using-maven-plugin_registry"><a class="anchor" href="#adding-artifact-references-automatically-using-maven-plugin_registry"></a>Adding artifact references automatically using the Apicurio Registry Maven plug-in</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Some Apicurio Registry artifact types can include <em>artifact references</em> from one artifact file to another. You can create efficiencies by defining reusable schema or API artifacts, and then referencing them from multiple locations in artifact references.</p>
</div>
<div class="paragraph">
<p>The following artifact types support artifact references:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apache Avro</p>
</li>
<li>
<p>Google Protobuf</p>
</li>
<li>
<p>JSON Schema</p>
</li>
<li>
<p>OpenAPI</p>
</li>
<li>
<p>AsyncAPI</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can specify a single artifact and configure the Apicurio Registry Maven plugin to automatically detect all references to artifacts located in the same directory, and to automatically register those references. This is a Technology Preview feature.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Technology Preview features are not supported with RedHat production service level agreements (SLAs) and might not be functionally complete.
RedHat does not recommend using them in production.
These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.</p>
</div>
<div class="paragraph">
<p>For more information about the support scope of RedHat Technology Preview features, see <a href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This section shows a simple example of using the Maven plug-in to register an Avro schema and automatically detect and register an artifact reference to a simple schema artifact. This example assumes that the parent <code>TradeKey</code> artifact and the nested <code>Exchange</code> schema artifact are both available in the same directory:</p>
</div>
<div class="listingblock">
<div class="title">TradeKey schema with nested reference to Exchange schema</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "namespace": "com.kubetrade.schema.trade",
  "type": "record",
  "name": "TradeKey",
  "fields": [
    {
      "name": "exchange",
      "type": "com.kubetrade.schema.common.Exchange"
    },
    {
      "name": "key",
      "type": "string"
    }
  ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Exchange schema</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "namespace": "com.kubetrade.schema.common",
  "type": "enum",
  "name": "Exchange",
  "symbols" : ["GEMINI"]
}</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a Maven project for your client application. For more details, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
<li>
<p>The <code>TradeKey</code> schema artifact and the nested <code>Exchange</code> schema artifact files are both located in the same directory.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update your Maven <code>pom.xml</code> file to use the <code>apicurio-registry-maven-plugin</code> to register the <code>TradeKey</code> schema, which includes a nested reference to the <code>Exchange</code> schema as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
    &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${apicurio-registry.version}&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;phase&gt;generate-sources&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;register&lt;/goal&gt; <i class="conum" data-value="1"></i><b>(1)</b>
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;registryUrl&gt;MY-REGISTRY-URL/apis/registry/v3&lt;/registryUrl&gt; <i class="conum" data-value="2"></i><b>(2)</b>
                &lt;authServerUrl&gt;MY-AUTH-SERVER&lt;/authServerUrl&gt;
                &lt;clientId&gt;MY-CLIENT-ID&lt;/clientId&gt;
                &lt;clientSecret&gt;MY-CLIENT-SECRET&lt;/clientSecret&gt; <i class="conum" data-value="3"></i><b>(3)</b>
                &lt;clientScope&gt;MY-CLIENT-SCOPE&lt;/clientScope&gt;
                &lt;artifacts&gt;
                    &lt;artifact&gt;
                        &lt;groupId&gt;test-group&lt;/groupId&gt; <i class="conum" data-value="4"></i><b>(4)</b>
                        &lt;artifactId&gt;TradeKey&lt;/artifactId&gt;
                        &lt;version&gt;2.0&lt;/version&gt;
                        &lt;artifactType&gt;AVRO&lt;/artifactType&gt;
                        &lt;file&gt;
                            ${project.basedir}/src/main/resources/schemas/TradeKey.avsc <i class="conum" data-value="5"></i><b>(5)</b>
                        &lt;/file&gt;
                        &lt;ifExists&gt;FIND_OR_CREATE_VERSION&lt;/ifExists&gt;
                        &lt;canonicalize&gt;true&lt;/canonicalize&gt;
                        &lt;autoRefs&gt;true&lt;/autoRefs&gt; <i class="conum" data-value="6"></i><b>(6)</b>
                    &lt;/artifact&gt;
                &lt;/artifacts&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify <code>register</code> as the execution goal to upload the schema artifacts to Apicurio Registry.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the Apicurio Registry URL by using the <code>../apis/registry/v3</code> endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If authentication is required, you can specify your authentication server and client credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify the parent artifact group ID that contains the references. You can specify the <code>default</code> group if you do not want to use a unique group ID.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Specify the location of the parent artifact file. All referenced artifacts must also be located in the same directory.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Set the <code>&lt;autoRefs&gt;</code> option to true to automatically detect and register all references to artifacts in the same directory. You can register multiple artifact references in this way.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Build your Maven project, for example, by using the <code>mvn package</code> command.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more details on using Apache Maven, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
<li>
<p>For an open source example of using the Apicurio Registry Maven plug-in to automatically register multiple artifact references, see the <a href="https://github.com/Apicurio/apicurio-registry/tree/main/examples/avro-maven-with-references-auto">avro-maven-with-references-auto demonstration example</a>.</p>
</li>
<li>
<p>For more examples of artifact references, see the section on configuring each artifact type in <a href="assembly-configuring-kafka-client-serdes.html">Configuring Kafka serializers/deserializers in Java clients</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-tls-maven-plugin_registry"><a class="anchor" href="#configuring-tls-maven-plugin_registry"></a>Configuring TLS and authentication for the Maven plug-in</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>When connecting to a TLS-enabled Apicurio Registry instance, you can configure the Maven plug-in to use SSL/TLS for secure communication. The plug-in supports various trust store and key store formats, as well as multiple authentication methods.</p>
</div>
<div class="sect2">
<h3 id="_tls_configuration_options"><a class="anchor" href="#_tls_configuration_options"></a>TLS configuration options</h3>
<div class="paragraph">
<p>The following table describes the TLS-related configuration options available in the Maven plug-in:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Trust store configuration</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trustStorePath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the trust store file containing the CA certificate(s) to trust. Supports JKS, PKCS12, and PEM formats. The format is auto-detected from the file extension (<code>.jks</code>, <code>.p12</code>/<code>.pfx</code>, <code>.pem</code>/<code>.crt</code>/<code>.cer</code>) unless explicitly specified.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trustStorePassword</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the trust store. Required for JKS and PKCS12 formats.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trustStoreType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit trust store type: <code>JKS</code>, <code>PKCS12</code>, or <code>PEM</code>. If not specified, the type is auto-detected from the file extension.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Key store configuration for mutual TLS (mTLS)</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keyStorePath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the key store file containing the client certificate for mTLS authentication. Supports JKS, PKCS12, and PEM formats.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keyStorePassword</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the key store. Required for JKS and PKCS12 formats.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keyStoreType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explicit key store type: <code>JKS</code>, <code>PKCS12</code>, or <code>PEM</code>. If not specified, the type is auto-detected from the file extension.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keyStorePemKeyPath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the PEM private key file. Required when using PEM format for mTLS, where <code>keyStorePath</code> points to the certificate file.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Additional SSL options</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trustAll</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <code>true</code>, trust all SSL/TLS certificates without validation. <strong>WARNING:</strong> This should only be used for development or testing purposes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>verifyHostname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <code>false</code>, disable hostname verification in SSL/TLS connections. <strong>WARNING:</strong> Disabling this reduces security and should only be used for development or testing.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_example_tls_with_pkcs12_trust_store"><a class="anchor" href="#_example_tls_with_pkcs12_trust_store"></a>Example: TLS with PKCS12 trust store</h3>
<div class="paragraph">
<p>The following example shows how to configure the Maven plug-in to connect to a TLS-enabled Apicurio Registry using a PKCS12 trust store:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
  &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${apicurio.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;generate-sources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;register&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
          &lt;registryUrl&gt;https://registry.example.com:8443/apis/registry/v3&lt;/registryUrl&gt; <i class="conum" data-value="1"></i><b>(1)</b>
          &lt;trustStorePath&gt;${project.basedir}/certs/truststore.p12&lt;/trustStorePath&gt; <i class="conum" data-value="2"></i><b>(2)</b>
          &lt;trustStorePassword&gt;${env.TRUSTSTORE_PASSWORD}&lt;/trustStorePassword&gt; <i class="conum" data-value="3"></i><b>(3)</b>
          &lt;artifacts&gt;
              &lt;artifact&gt;
                  &lt;groupId&gt;default&lt;/groupId&gt;
                  &lt;artifactId&gt;MySchema&lt;/artifactId&gt;
                  &lt;file&gt;${project.basedir}/src/main/resources/schemas/schema.avsc&lt;/file&gt;
              &lt;/artifact&gt;
          &lt;/artifacts&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use <code>https://</code> for the registry URL when connecting with TLS.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specify the path to your PKCS12 trust store containing the CA certificate(s).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Use environment variables for passwords to avoid storing secrets in your <code>pom.xml</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_example_tls_with_basic_authentication"><a class="anchor" href="#_example_tls_with_basic_authentication"></a>Example: TLS with basic authentication</h3>
<div class="paragraph">
<p>The following example shows how to combine TLS with basic authentication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
  &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${apicurio.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;generate-sources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;register&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
          &lt;registryUrl&gt;https://registry.example.com:8443/apis/registry/v3&lt;/registryUrl&gt;
          &lt;trustStorePath&gt;${project.basedir}/certs/truststore.p12&lt;/trustStorePath&gt;
          &lt;trustStorePassword&gt;${env.TRUSTSTORE_PASSWORD}&lt;/trustStorePassword&gt;
          &lt;username&gt;${env.REGISTRY_USERNAME}&lt;/username&gt; <i class="conum" data-value="1"></i><b>(1)</b>
          &lt;password&gt;${env.REGISTRY_PASSWORD}&lt;/password&gt;
          &lt;artifacts&gt;
              &lt;artifact&gt;
                  &lt;groupId&gt;default&lt;/groupId&gt;
                  &lt;artifactId&gt;MySchema&lt;/artifactId&gt;
                  &lt;file&gt;${project.basedir}/src/main/resources/schemas/schema.avsc&lt;/file&gt;
              &lt;/artifact&gt;
          &lt;/artifacts&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Combine TLS configuration with basic authentication credentials.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_example_tls_with_oauth2_authentication"><a class="anchor" href="#_example_tls_with_oauth2_authentication"></a>Example: TLS with OAuth2 authentication</h3>
<div class="paragraph">
<p>The following example shows how to configure TLS with OAuth2/OIDC client credentials authentication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
  &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${apicurio.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;generate-sources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;register&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
          &lt;registryUrl&gt;https://registry.example.com:8443/apis/registry/v3&lt;/registryUrl&gt;
          &lt;trustStorePath&gt;${project.basedir}/certs/truststore.p12&lt;/trustStorePath&gt;
          &lt;trustStorePassword&gt;${env.TRUSTSTORE_PASSWORD}&lt;/trustStorePassword&gt;
          &lt;authServerUrl&gt;https://keycloak.example.com/realms/registry/protocol/openid-connect/token&lt;/authServerUrl&gt; <i class="conum" data-value="1"></i><b>(1)</b>
          &lt;clientId&gt;${env.CLIENT_ID}&lt;/clientId&gt;
          &lt;clientSecret&gt;${env.CLIENT_SECRET}&lt;/clientSecret&gt;
          &lt;clientScope&gt;openid&lt;/clientScope&gt;
          &lt;artifacts&gt;
              &lt;artifact&gt;
                  &lt;groupId&gt;default&lt;/groupId&gt;
                  &lt;artifactId&gt;MySchema&lt;/artifactId&gt;
                  &lt;file&gt;${project.basedir}/src/main/resources/schemas/schema.avsc&lt;/file&gt;
              &lt;/artifact&gt;
          &lt;/artifacts&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specify the OAuth2/OIDC token endpoint URL for authentication.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_example_mutual_tls_mtls"><a class="anchor" href="#_example_mutual_tls_mtls"></a>Example: Mutual TLS (mTLS)</h3>
<div class="paragraph">
<p>The following example shows how to configure mutual TLS where both the client and server authenticate each other using certificates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
  &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${apicurio.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;generate-sources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;register&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
          &lt;registryUrl&gt;https://registry.example.com:8443/apis/registry/v3&lt;/registryUrl&gt;
          &lt;trustStorePath&gt;${project.basedir}/certs/truststore.p12&lt;/trustStorePath&gt; <i class="conum" data-value="1"></i><b>(1)</b>
          &lt;trustStorePassword&gt;${env.TRUSTSTORE_PASSWORD}&lt;/trustStorePassword&gt;
          &lt;keyStorePath&gt;${project.basedir}/certs/client-keystore.p12&lt;/keyStorePath&gt; <i class="conum" data-value="2"></i><b>(2)</b>
          &lt;keyStorePassword&gt;${env.KEYSTORE_PASSWORD}&lt;/keyStorePassword&gt;
          &lt;artifacts&gt;
              &lt;artifact&gt;
                  &lt;groupId&gt;default&lt;/groupId&gt;
                  &lt;artifactId&gt;MySchema&lt;/artifactId&gt;
                  &lt;file&gt;${project.basedir}/src/main/resources/schemas/schema.avsc&lt;/file&gt;
              &lt;/artifact&gt;
          &lt;/artifacts&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Trust store to verify the server&#8217;s certificate.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Key store containing the client certificate for authentication.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_example_tls_with_pem_certificates"><a class="anchor" href="#_example_tls_with_pem_certificates"></a>Example: TLS with PEM certificates</h3>
<div class="paragraph">
<p>The following example shows how to use PEM-formatted certificates:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
  &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${apicurio.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;generate-sources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;register&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
          &lt;registryUrl&gt;https://registry.example.com:8443/apis/registry/v3&lt;/registryUrl&gt;
          &lt;trustStorePath&gt;${project.basedir}/certs/ca-cert.pem&lt;/trustStorePath&gt; <i class="conum" data-value="1"></i><b>(1)</b>
          &lt;trustStoreType&gt;PEM&lt;/trustStoreType&gt;
          &lt;artifacts&gt;
              &lt;artifact&gt;
                  &lt;groupId&gt;default&lt;/groupId&gt;
                  &lt;artifactId&gt;MySchema&lt;/artifactId&gt;
                  &lt;file&gt;${project.basedir}/src/main/resources/schemas/schema.avsc&lt;/file&gt;
              &lt;/artifact&gt;
          &lt;/artifacts&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>PEM certificate files do not require a password.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_example_mtls_with_pem_certificates"><a class="anchor" href="#_example_mtls_with_pem_certificates"></a>Example: mTLS with PEM certificates</h3>
<div class="paragraph">
<p>The following example shows mTLS configuration using PEM-formatted certificate and key files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
  &lt;groupId&gt;io.apicurio&lt;/groupId&gt;
  &lt;artifactId&gt;apicurio-registry-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;${apicurio.version}&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;generate-sources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;register&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
          &lt;registryUrl&gt;https://registry.example.com:8443/apis/registry/v3&lt;/registryUrl&gt;
          &lt;trustStorePath&gt;${project.basedir}/certs/ca-cert.pem&lt;/trustStorePath&gt;
          &lt;trustStoreType&gt;PEM&lt;/trustStoreType&gt;
          &lt;keyStorePath&gt;${project.basedir}/certs/client-cert.pem&lt;/keyStorePath&gt; <i class="conum" data-value="1"></i><b>(1)</b>
          &lt;keyStorePemKeyPath&gt;${project.basedir}/certs/client-key.pem&lt;/keyStorePemKeyPath&gt; <i class="conum" data-value="2"></i><b>(2)</b>
          &lt;keyStoreType&gt;PEM&lt;/keyStoreType&gt;
          &lt;artifacts&gt;
              &lt;artifact&gt;
                  &lt;groupId&gt;default&lt;/groupId&gt;
                  &lt;artifactId&gt;MySchema&lt;/artifactId&gt;
                  &lt;file&gt;${project.basedir}/src/main/resources/schemas/schema.avsc&lt;/file&gt;
              &lt;/artifact&gt;
          &lt;/artifacts&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Path to the client certificate PEM file.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Path to the client private key PEM file. Required when using PEM format for mTLS.</td>
</tr>
</table>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more details on using Apache Maven, see the <a href="https://maven.apache.org/index.html">Apache Maven documentation</a>.</p>
</li>
<li>
<p>For a complete example with multiple TLS and authentication configurations, see the <a href="https://github.com/Apicurio/apicurio-registry/tree/main/examples/maven-plugin-tls-credentials">maven-plugin-tls-credentials demonstration example</a>.</p>
</li>
<li>
<p>For a Kubernetes mTLS setup example, see the <a href="https://github.com/Apicurio/apicurio-registry/tree/main/examples/mtls-minikube">mTLS Minikube demonstration example</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright  2024 Red Hat, Inc. All rights reserved.</p>
</footer>
<script src="../../../assets/js/site.js"></script>
<script src="../../../assets/js/vendor/lunr.js"></script>
<script src="../../../assets/js/vendor/search.js" id="search-script" data-base-path="../../.." data-page-path="/apicurio-registry/3.1.x/getting-started/assembly-managing-registry-artifacts-maven.html"></script>
<script async src="../../../assets/../search-index.js"></script>
<script async src="../../../assets/js/vendor/highlight.js"></script>
  </body>
</html>
