<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuring Apicurio Studio storage :: Apicurio Studio</title>
    <link rel="canonical" href="https://www.apicur.io/studio/docs/apicurio-studio/1.0.x/assembly-studio-storage.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
    <link rel="stylesheet" href="../../assets/css/site.css">
    <link rel="stylesheet" href="https://www.apicur.io/css/rhbar.css">
<link rel="stylesheet" href="../../assets/css/search.css">
    <link rel="shortcut icon" href="https://www.apicur.io/images/favicon.ico" type="image/x-icon" integrity="sha384-if9KH+NQ2dMhdrWu+INnJTcvG6riRakUAnbhecX5a7voubrapo7ouFGS+GYZ/N4P" crossorigin="anonymous"/>
  </head>
  <body class="article">
<div class="masthead-wrapper">
    <div class="search-box">
        <input id="search-input" type="text" placeholder="Search docs">
    </div>
    <div class="masthead">
        <div class="logo-wrapper">
            <a href="/"><img src="https://www.apicur.io/images/apicurio_headerlogo.png" class="project-logo"
                    title="Apicurio"></a>
        </div>
        <div class="menu-wrapper">
            <ul id="menu" class="menu">
                <li>
                    <a href="/studio/" id="menu-item-studio">Studio</a>
                </li>
                <li>
                    <a href="/registry/" id="menu-item-registry">Registry</a>
                </li>
                <li>
                    <a href="/datamodels/">Data Models</a>
                </li>
                <li>
                    <a href="/apicurito/">Apicurito</a>
                </li>
                <li>
                    <a href="/blog/">Blog</a>
                </li>
                <li>
                    <a href="/contact/">Contact</a>
                </li>
                <li>
                    <a href="https://github.com/apicurio">Fork</a>
                </li>
            </ul>
        </div>
    </div>
</div>
<script>
    var currentURL = window.location.href;
    var studioAnchor = document.getElementById("menu-item-studio");
    var registryAnchor = document.getElementById("menu-item-registry");

    if (currentURL.includes("studio")) {
        studioAnchor.classList.add("active");
    } else if (currentURL.includes("registry")) {
        registryAnchor.classList.add("active");
    }
</script>
<div class="body">
<div class="nav-container" data-component="apicurio-studio" data-version="1.0.x">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Apicurio Studio</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="assembly-introduction.html">Introduction to Apicurio Studio</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="assembly-migrating-studio-v0-v1.html">Migrating an existing Apicurio Studio deployment</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-installing-studio-docker.html">Installing Apicurio Studio using Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="assembly-installing-studio-kubernetes.html">Installing Apicurio Studio on Kubernetes</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="assembly-studio-storage.html">Configuring Apicurio Studio storage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="assembly-getting-started.html">Getting started with Apicurio Studio</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="assembly-maintenance.html">Configuring and managing Apicurio Studio deployment</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="assembly-config-reference.html">Apicurio Studio configuration reference</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Apicurio Studio</span>
    <span class="version">1.0.x</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Apicurio Studio</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.0.x</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Apicurio Studio</a></li>
    <li>Installation</li>
    <li><a href="assembly-studio-storage.html">Configuring Apicurio Studio storage</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/Apicurio/apicurio-studio">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Configuring Apicurio Studio storage</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This chapter explains how to configure the available Apicurio Studio storage options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#registry-persistence-options">Apicurio Studio storage options</a></p>
</li>
<li>
<p><a href="#studio-persistence-mem">Configuring Apicurio Studio In-Memory storage using CLI</a></p>
</li>
<li>
<p><a href="#studio-persistence-sql">Configuring SQL (PostgreSQL) storage</a></p>
</li>
<li>
<p><a href="#install-postgresql-operatorhub">Installing PostgreSQL database storage using OpenShift OperatorHub</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="registry-persistence-options"><a class="anchor" href="#registry-persistence-options"></a>Apicurio Studio storage options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main decision to make when deploying Apicurio Studio is which storage backend to use.</p>
</div>
<div class="paragraph">
<p>The following storage options are available:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Apicurio Studio data storage options</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Storage option</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">In-memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is stored in RAM on each Apicurio Studio node. This is the easiest deployment to use, but is not recommended for production environment. All data is lost when restarting Apicurio Studio with this storage option, which is suitable for a development environment only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQL database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is stored in a relational database, in this case PostgreSQL 12+. This is the recommended storage option in a production environment for performance, stability, and data management (backup/restore, and so on).</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="studio-persistence-mem"><a class="anchor" href="#studio-persistence-mem"></a>Configuring Apicurio Studio In-Memory storage using CLI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The in-memory storage option uses RAM to store the data on nodes where Apicurio Studio is deployed, and it is the simplest persistence option to use.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a Kubernetes cluster with cluster administrator access.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p><strong><em>TODO</em></strong></p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This persistence option does not support data distribution across Apicurio Studio nodes.
Therefore, it is only recommended for development environments using a single replica (<code>Pod</code>).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="studio-persistence-sql"><a class="anchor" href="#studio-persistence-sql"></a>Configuring SQL (PostgreSQL) storage</h2>
<div class="sectionbody">
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have a Kubernetes cluster with cluster administrator access.</p>
</li>
<li>
<p>You have a PostgreSQL database reachable from your Kubernetes cluster.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the Kubernetes web console, log in with cluster administrator privileges.</p>
</li>
<li>
<p>Change to the Kubernetes namespace in which Apicurio Studio and your PostgreSQL Operator are installed.</p>
</li>
<li>
<p><strong><em>TODO</em></strong></p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.crunchydata.com/documentation/postgres-operator/4.5.0/quickstart/">Crunchy PostgreSQL Operator QuickStart</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-postgresql-operatorhub"><a class="anchor" href="#install-postgresql-operatorhub"></a>Installing PostgreSQL database storage using OpenShift OperatorHub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of the available storage options requires that you provide connection information to a PostgreSQL database.
You can use any PostgreSQL database available on your OpenShift cluster, but it is recommended to use <a href="https://docs.openshift.com/container-platform/latest/operators/understanding/olm-understanding-operatorhub.html">OperatorHub</a> to choose and install an Operator that can manage a PostgreSQL database for you.</p>
</div>
<div class="paragraph">
<p>You can install your preferred PostgresQL Operator, but this section shows how to install the <strong>PostgreSQL Operator by Dev4Ddevs.com</strong> and create a new database for Apicurio Registry.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You must have cluster administrator access to an OpenShift cluster.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In the OpenShift Container container-platform web console, log in using an account with cluster administrator privileges.</p>
</li>
<li>
<p>Change to the OpenShift project in which Apicurio Studio is installed. For example, from the <strong>Project</strong> drop-down, select <code>my-project</code>.</p>
</li>
<li>
<p>In the left navigation menu, click <strong>Operators</strong> &gt; <strong>OperatorHub</strong>.</p>
</li>
<li>
<p>In the <strong>Filter by keyword</strong> text box, enter <code>PostgreSQL</code> to find an Operator suitable for your environment, for example, <strong>PostgreSQL Operator by Dev4Ddevs.com</strong> or <strong>Crunchy PostgreSQL for OpenShift</strong>.</p>
</li>
<li>
<p>Read the information about the Operator, and click <strong>Install</strong>. This displays the <strong>Create Operator Subscription</strong> page.</p>
</li>
<li>
<p>Select your subscription settings, for example:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Installation Mode</strong>: Select one of the following:</p>
<div class="ulist">
<ul>
<li>
<p><strong>All namespaces on the cluster (default)</strong></p>
</li>
<li>
<p><strong>A specific namespace on the cluster</strong>  and then <strong>my-project</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Update Channel</strong> &gt; <strong>stable</strong></p>
</li>
<li>
<p><strong>Approval Strategy</strong>: Select <strong>Automatic</strong> or <strong>Manual</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Subscribe</strong>. This displays the <strong>Operators</strong> &gt; <strong>Installed Operators</strong> page.</p>
</li>
<li>
<p>Wait a few moments until the <strong>Status</strong> for the PostgreSQL Operator displays <strong>Succeeded</strong> and the subscription is <strong>Up to Date</strong>.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You must read the documentation from your chosen <strong>PostgreSQL</strong> Operator for details on how to create and manage your database.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Create a PostgreSQL database for your Apicurio Studio storage. For example, click <strong>Installed Operators</strong> &gt; <strong>PostgreSQL Operator by Dev4Ddevs.com</strong> &gt; <strong>Create database</strong> &gt; <strong>YAML</strong>.</p>
</li>
<li>
<p>Edit the database settings as follows:</p>
<div class="ulist">
<ul>
<li>
<p><code>name</code>: Change the value to <code>studio</code></p>
</li>
<li>
<p><code>image</code>: Change the value to <code>centos/postgresql-10-centos7</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Edit any other database settings as needed depending on your environment, for example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: postgresql.dev4devs.com/v1alpha1
kind: Database
metadata:
  name: studio
  namespace: my-project
spec:
  databaseCpu: 30m
  databaseCpuLimit: 60m
  databaseMemoryLimit: 512Mi
  databaseMemoryRequest: 128Mi
  databaseName: example
  databaseNameKeyEnvVar: POSTGRESQL_DATABASE
  databasePassword: postgres
  databasePasswordKeyEnvVar: POSTGRESQL_PASSWORD
  databaseStorageRequest: 1Gi
  databaseUser: postgres
  databaseUserKeyEnvVar: POSTGRESQL_USER
  image: centos/postgresql-10-centos7
  size: 1</code></pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Create Database</strong>, and wait until the database is created.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://access.crunchydata.com/documentation/postgres-operator/4.5.0/quickstart/">Crunchy PostgreSQL Operator QuickStart</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright © 2024 Red Hat, Inc. All rights reserved.</p>
</footer>
<script src="../../assets/js/site.js"></script>
<script src="../../assets/js/vendor/lunr.js"></script>
<script src="../../assets/js/vendor/search.js" id="search-script" data-base-path="../.." data-page-path="/apicurio-studio/1.0.x/assembly-studio-storage.html"></script>
<script async src="../../assets/../search-index.js"></script>
<script async src="../../assets/js/vendor/highlight.js"></script>
  </body>
</html>
